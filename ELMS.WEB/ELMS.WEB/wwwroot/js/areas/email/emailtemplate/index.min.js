$(document).ready(function(){function n(n,t){t&&(n+=`?${t}`);$.get(n,function(n){if(n.message)window.location.href=encodeURI(`/Email/EmailTemplate/Index?ErrorMessage=${n.message}`);else if($("#modalDialog").html(n),$("#modalRoot").modal("show"),$("#modalRoot").is(":visible")){var t=jQuery("form",$modal).first();jQuery.validator.unobtrusive.parse(t)}})}function t(n){$.ajax({method:n.attr("method"),url:n.attr("action"),data:n.serialize(),success:function(n){n.success?window.location.href=encodeURI(`/Email/EmailTemplate/Index?SuccessMessage=${n.success}`):n.error?window.location.href=encodeURI(`/Email/EmailTemplate/Index?SuccessMessage=${n.error}`):$("#modalDialog").html(n)}})}$(".create").click(function(){console.log("hello");n($(this).data("url"),null);var t=new MutationObserver(function(){console.log("change detected");setTimeout(function(){tinymce.init({selector:".tinymce",menubar:!1})},500)});t.observe($("#modalRoot").get(0),{childList:!0})});$("#modalRoot").on("submit",".formCreate",function(n){n.preventDefault();var i=$(this);t(i)});$(".editEmailTemplate").click(function(){n($(this).data("url"),`uid=${$(this).data("uid")}`)});$(".deleteEmailTemplate").click(function(){n($(this).data("url"),`uid=${$(this).data("uid")}`)});$("#modalRoot").on("submit","#formDeleteEmailTemplate",function(n){n.preventDefault();var i=$(this);t(i)})});